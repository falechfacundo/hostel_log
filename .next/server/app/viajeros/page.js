(()=>{var e={};e.id=360,e.ids=[360],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8893:e=>{"use strict";e.exports=require("buffer")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2615:e=>{"use strict";e.exports=require("http")},5240:e=>{"use strict";e.exports=require("https")},8216:e=>{"use strict";e.exports=require("net")},5315:e=>{"use strict";e.exports=require("path")},8621:e=>{"use strict";e.exports=require("punycode")},6162:e=>{"use strict";e.exports=require("stream")},2452:e=>{"use strict";e.exports=require("tls")},7360:e=>{"use strict";e.exports=require("url")},1568:e=>{"use strict";e.exports=require("zlib")},935:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>l.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>o,routeModule:()=>p,tree:()=>c}),r(9640),r(6773),r(5866);var a=r(3191),t=r(8716),n=r(7922),l=r.n(n),i=r(5231),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);r.d(s,d);let c=["",{children:["viajeros",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,9640)),"C:\\Users\\Faia Facundo\\Desktop\\Programacion\\proyectos_workana\\hostel_log-main\\src\\app\\viajeros\\page.jsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,6773)),"C:\\Users\\Faia Facundo\\Desktop\\Programacion\\proyectos_workana\\hostel_log-main\\src\\app\\layout.jsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],o=["C:\\Users\\Faia Facundo\\Desktop\\Programacion\\proyectos_workana\\hostel_log-main\\src\\app\\viajeros\\page.jsx"],m="/viajeros/page",u={require:r,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:t.x.APP_PAGE,page:"/viajeros/page",pathname:"/viajeros",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},9155:(e,s,r)=>{let a={"721ba0f507080d5e5d2fa0817fe34b2e284f36f7":()=>Promise.resolve().then(r.bind(r,7570)).then(e=>e.createPartner),dbf92610f26438a90ecfd4062645c3ead5ee2e29:()=>Promise.resolve().then(r.bind(r,7570)).then(e=>e.fetchPartnersByDate),dc989150d3e40f12b62d32b1d4696ce7e25131ba:()=>Promise.resolve().then(r.bind(r,7570)).then(e=>e.deletePartner)};async function t(e,...s){return(await a[e]()).apply(null,s)}e.exports={"721ba0f507080d5e5d2fa0817fe34b2e284f36f7":t.bind(null,"721ba0f507080d5e5d2fa0817fe34b2e284f36f7"),dbf92610f26438a90ecfd4062645c3ead5ee2e29:t.bind(null,"dbf92610f26438a90ecfd4062645c3ead5ee2e29"),dc989150d3e40f12b62d32b1d4696ce7e25131ba:t.bind(null,"dc989150d3e40f12b62d32b1d4696ce7e25131ba")}},8108:(e,s,r)=>{Promise.resolve().then(r.bind(r,7530))},9608:(e,s,r)=>{"use strict";r.d(s,{Z:()=>a});let a=(0,r(2881).Z)("Backpack",[["path",{d:"M4 10a4 4 0 0 1 4-4h8a4 4 0 0 1 4 4v10a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2z",key:"1ol0lm"}],["path",{d:"M8 10h8",key:"c7uz4u"}],["path",{d:"M8 18h8",key:"1no2b1"}],["path",{d:"M8 22v-6a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v6",key:"1fr6do"}],["path",{d:"M9 6V4a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v2",key:"donm21"}]])},2933:(e,s,r)=>{"use strict";r.d(s,{Z:()=>a});let a=(0,r(2881).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},9635:(e,s,r)=>{"use strict";r.d(s,{Z:()=>a});let a=(0,r(2881).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},7530:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>ee});var a=r(326),t=r(7577),n=r(9613),l=r(5999),i=r(3855),d=r(4061),c=r(9635),o=r(1561),m=r(2978),u=r(2523),p=r(2133),x=r(1805),h=r(5188),f=r(7115),j=r(8051),g=r(3095),b=r(2561),v=r(2067),N=r(3405),y=r(2566),k=r(9815),w=r(5226),C="Checkbox",[P,Z]=(0,g.b)(C),[q,E]=P(C),A=t.forwardRef((e,s)=>{let{__scopeCheckbox:r,name:n,checked:l,defaultChecked:i,required:d,disabled:c,value:o="on",onCheckedChange:m,form:u,...p}=e,[x,h]=t.useState(null),f=(0,j.e)(s,e=>h(e)),g=t.useRef(!1),N=!x||u||!!x.closest("form"),[y=!1,k]=(0,v.T)({prop:l,defaultProp:i,onChange:m}),C=t.useRef(y);return t.useEffect(()=>{let e=x?.form;if(e){let s=()=>k(C.current);return e.addEventListener("reset",s),()=>e.removeEventListener("reset",s)}},[x,k]),(0,a.jsxs)(q,{scope:r,state:y,disabled:c,children:[(0,a.jsx)(w.WV.button,{type:"button",role:"checkbox","aria-checked":I(y)?"mixed":y,"aria-required":d,"data-state":_(y),"data-disabled":c?"":void 0,disabled:c,value:o,...p,ref:f,onKeyDown:(0,b.M)(e.onKeyDown,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,b.M)(e.onClick,e=>{k(e=>!!I(e)||!e),N&&(g.current=e.isPropagationStopped(),g.current||e.stopPropagation())})}),N&&(0,a.jsx)(z,{control:x,bubbles:!g.current,name:n,value:o,checked:y,required:d,disabled:c,form:u,style:{transform:"translateX(-100%)"},defaultChecked:!I(i)&&i})]})});A.displayName=C;var S="CheckboxIndicator",G=t.forwardRef((e,s)=>{let{__scopeCheckbox:r,forceMount:t,...n}=e,l=E(S,r);return(0,a.jsx)(k.z,{present:t||I(l.state)||!0===l.state,children:(0,a.jsx)(w.WV.span,{"data-state":_(l.state),"data-disabled":l.disabled?"":void 0,...n,ref:s,style:{pointerEvents:"none",...e.style}})})});G.displayName=S;var z=e=>{let{control:s,checked:r,bubbles:n=!0,defaultChecked:l,...i}=e,d=t.useRef(null),c=(0,N.D)(r),o=(0,y.t)(s);t.useEffect(()=>{let e=d.current,s=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(c!==r&&s){let a=new Event("click",{bubbles:n});e.indeterminate=I(r),s.call(e,!I(r)&&r),e.dispatchEvent(a)}},[c,r,n]);let m=t.useRef(!I(r)&&r);return(0,a.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:l??m.current,...i,tabIndex:-1,ref:d,style:{...e.style,...o,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function I(e){return"indeterminate"===e}function _(e){return I(e)?"indeterminate":e?"checked":"unchecked"}var R=r(2933),M=r(1175);let $=t.forwardRef(({className:e,...s},r)=>a.jsx(A,{ref:r,className:(0,M.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...s,children:a.jsx(G,{className:(0,M.cn)("flex items-center justify-center text-current"),children:a.jsx(R.Z,{className:"h-3.5 w-3.5"})})}));$.displayName=A.displayName;var D=r(8091),F=r(9608),T=r(7506);function U({onAddGroup:e,partnerId:s,partnerName:r}){let[n,d]=(0,t.useState)([{name:"",backpack:!1}]),[c,m]=(0,t.useState)(!1),[u,p]=(0,t.useState)({}),x=e=>{let s=[...n];s.splice(e,1),d(s)},j=(e,s)=>{let r=[...n];r[e].name=s,d(r),s.trim()&&p(s=>{let r={...s};return delete r[`member-${e}`],r})},g=e=>{let s=[...n];s[e].backpack=!s[e].backpack,d(s)},b=()=>{let e={};return 0===n.filter(e=>""!==e.name.trim()).length&&(e.members="Se requiere al menos un miembro en el grupo"),n.forEach((s,r)=>{!s.name.trim()&&r<3&&(e[`member-${r}`]="Nombre requerido")}),p(e),0===Object.keys(e).length},v=async r=>{if(r.preventDefault(),!b()){l.A.error("Por favor corrige los errores del formulario");return}let a=n.filter(e=>""!==e.name.trim());if(0===a.length){l.A.error("Se requiere al menos un miembro en el grupo");return}m(!0);try{await e({people:a,partnerId:s}),d([{name:"",backpack:!1}]),p({})}catch(e){console.log("Error al crear grupo:",e)}finally{m(!1)}};return a.jsx("div",{children:(0,a.jsxs)("form",{onSubmit:v,className:"space-y-6",children:[r&&(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Este grupo ser\xe1 asignado al partner:"," ",a.jsx("span",{className:"font-medium",children:r})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,a.jsxs)(f._,{className:u.members?"text-red-500":"",children:["Miembros del Grupo",u.members&&a.jsx("span",{className:"ml-1 text-xs",children:"*"})]}),(0,a.jsxs)(o.z,{type:"button",onClick:()=>{d([...n,{name:"",backpack:!1}])},variant:"outline",size:"sm",className:"flex items-center gap-1",children:[a.jsx(i.Z,{className:"h-3.5 w-3.5"}),a.jsx("span",{children:"A\xf1adir"})]})]}),u.members&&a.jsx("p",{className:"text-red-500 text-xs mb-2",children:u.members}),a.jsx("div",{className:"space-y-4 max-h-[200px] overflow-y-auto pr-1",children:n.map((e,s)=>(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx(h.I,{value:e.name,onChange:e=>j(s,e.target.value),placeholder:`Persona ${s+1}`,className:`flex-1 ${u[`member-${s}`]?"border-red-500":""}`}),a.jsx(o.z,{type:"button",onClick:()=>x(s),variant:"destructive",size:"icon",disabled:n.length<=1,className:"h-9 w-9 flex-shrink-0",children:a.jsx(D.Z,{className:"h-4 w-4"})})]}),u[`member-${s}`]&&a.jsx("p",{className:"text-red-500 text-xs",children:u[`member-${s}`]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 ml-1",children:[a.jsx($,{id:`member-backpack-${s}`,checked:e.backpack,onCheckedChange:()=>g(s)}),(0,a.jsxs)("label",{htmlFor:`member-backpack-${s}`,className:"text-xs flex items-center cursor-pointer",children:[a.jsx(F.Z,{className:"h-3 w-3 mr-1 text-muted-foreground"}),"Tiene mochila"]})]})]},s))})]}),a.jsx("div",{className:"pt-2",children:a.jsx(o.z,{type:"submit",className:"w-full",disabled:c,children:c?(0,a.jsxs)(a.Fragment,{children:[a.jsx(T.Z,{className:"h-4 w-4 mr-2 animate-spin"}),"Creando..."]}):"Crear Grupo"})})]})})}function O({onAddIndividual:e}){let[s,r]=(0,t.useState)(""),[n,d]=(0,t.useState)(!1),[c,m]=(0,t.useState)([]),[u,p]=(0,t.useState)(!1),x=async()=>{if(0===c.length){l.A.error("A\xf1ade al menos una persona");return}p(!0);try{for(let s of c)await e(s);m([])}catch(e){console.error(e)}finally{p(!1)}},j=e=>{let s=[...c];s.splice(e,1),m(s)};return a.jsx("div",{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!s.trim()){l.A.error("El nombre es requerido");return}m([...c,{name:s.trim(),backpack:n}]),r(""),document.getElementById("personName").focus()},className:"space-y-3",children:[a.jsx("div",{className:"flex gap-2",children:(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx(f._,{htmlFor:"personName",children:"Nombre de la persona"}),a.jsx(h.I,{id:"personName",value:s,onChange:e=>r(e.target.value),placeholder:"Nombre de la persona",className:"w-full",autoFocus:!0})]})}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx($,{id:"hasBackpack",checked:n,onCheckedChange:e=>d(!!e)}),(0,a.jsxs)("label",{htmlFor:"hasBackpack",className:"text-sm flex items-center cursor-pointer",children:[a.jsx(F.Z,{className:"h-4 w-4 mr-1 text-muted-foreground"}),"Tiene mochila"]})]}),(0,a.jsxs)(o.z,{type:"submit",size:"sm",className:"ml-auto",children:[a.jsx(i.Z,{className:"h-4 w-4 mr-1"}),"A\xf1adir"]})]})]}),c.length>0&&(0,a.jsxs)("div",{className:"border rounded-md p-2",children:[(0,a.jsxs)("h3",{className:"text-sm font-medium mb-2",children:["Personas a a\xf1adir (",c.length,"):"]}),a.jsx("ul",{className:"max-h-[200px] overflow-y-auto space-y-1",children:c.map((e,s)=>(0,a.jsxs)("li",{className:"flex justify-between items-center py-1 px-2 hover:bg-muted/50 rounded-sm text-sm",children:[a.jsx("div",{className:"flex flex-col",children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[a.jsx("span",{className:"font-medium",children:e.name}),e.backpack&&a.jsx(F.Z,{className:"h-3.5 w-3.5 text-primary"})]})}),(0,a.jsxs)(o.z,{type:"button",variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>j(s),children:[a.jsx("span",{className:"sr-only",children:"Eliminar"}),a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-3.5 w-3.5",children:a.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})]})]},s))})]}),a.jsx("div",{className:"pt-2",children:a.jsx(o.z,{type:"button",className:"w-full",onClick:x,disabled:0===c.length||u,children:u?(0,a.jsxs)(a.Fragment,{children:[a.jsx(T.Z,{className:"h-4 w-4 mr-2 animate-spin"}),"Guardando..."]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(R.Z,{className:"h-4 w-4 mr-2"}),c.length>0?`Guardar ${c.length} ${1===c.length?"persona":"personas"}`:"Guardar personas"]})})})]})})}function L({person:e,onUpdate:s,disabled:r=!1}){let[n,i]=(0,t.useState)(!1),[d,c]=(0,t.useState)(e?.backpack||!1),o=async()=>{try{i(!0);let r=!d;if(c(r),"function"==typeof s)await s({id:e.id,backpack:r});else throw Error("Update function is not provided or is invalid")}catch(e){c(d),console.error("Error toggling backpack:",e),l.A.error("Error al actualizar estado de mochila")}finally{i(!1)}};return(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx($,{id:`backpack-${e.id}`,checked:d,onCheckedChange:o,disabled:n||r,className:"h-4 w-4 rounded-sm data-[state=checked]:bg-blue-500"}),(0,a.jsxs)("label",{htmlFor:`backpack-${e.id}`,className:"ml-2 text-sm flex items-center gap-1 cursor-pointer",children:[a.jsx(F.Z,{className:`h-3.5 w-3.5 ${d?"text-blue-500":"text-muted-foreground"}`}),n?"Actualizando...":""]})]})}var V=r(809),B=r(7358),H=r(2780),K=r(1245);function W({individuals:e=[],isLoading:s=!1,onRemoveIndividual:r}){let t=(0,u.q)(e=>e.updatePerson),n=e=>{if(!e)return"-";try{return(0,H.WU)(new Date(e),"dd/MM/yyyy",{locale:K.es})}catch(e){return"-"}};return s?a.jsx("div",{className:"text-center py-4",children:"Cargando personas..."}):0===e.length?(0,a.jsxs)("div",{className:"bg-muted/50 rounded-lg p-8 text-center",children:[a.jsx(c.Z,{className:"mx-auto h-12 w-12 text-muted-foreground"}),a.jsx("h3",{className:"mt-2 text-lg font-medium",children:"No hay personas individuales"}),a.jsx("p",{className:"mt-1 text-muted-foreground",children:"Agrega personas individuales usando el formulario"})]}):(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Personas Individuales"}),a.jsx("div",{className:"space-y-2",children:e.map(e=>a.jsx(V.Zb,{children:a.jsx(V.aY,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"font-medium",children:e.name||e.first_name||"Sin nombre"}),e.notes&&a.jsx("p",{className:"text-sm text-muted-foreground",children:e.notes}),(e.start_date||e.end_date)&&(0,a.jsxs)("div",{className:"flex items-center text-xs text-muted-foreground mt-1",children:[a.jsx(B.Z,{className:"h-3 w-3 mr-1"}),(0,a.jsxs)("span",{children:[n(e.start_date)," -"," ",n(e.end_date)]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(L,{person:e,onUpdate:t}),a.jsx(o.z,{variant:"destructive",size:"icon",onClick:()=>r(e.id),children:a.jsx(D.Z,{className:"h-4 w-4"})})]})]})})},e.id))})]})}function X({isLoading:e=!1,groups:s,onDeleteGroup:r,onAddMember:n,onRemoveMember:l,onUpdatePerson:i}){let c=(0,u.q)(e=>e.updatePerson),m=(0,u.q)(e=>e.deleteGroup),x=(0,u.q)(e=>e.addPersonToGroup),h=(0,u.q)(e=>e.removePersonFromGroup),f=(0,p.Z)(e=>e.groups),j=(0,p.Z)(e=>e.selectedPartner),g=(0,p.Z)(e=>e.individuals),[b,v]=(0,t.useState)({}),N=s||f,y=r||m,k=n||((e,s)=>{f.find(s=>s.id===e)&&x({groupId:e,personData:{...s,partnerId:j?.id}})}),w=l||((e,s)=>{h({groupId:e,personId:s})}),C=i||c,P=e=>{confirm(`\xbfEst\xe1s seguro de eliminar el grupo?`)&&(console.log("Eliminando grupo con ID:",e),y(e))},Z=(e,s,r)=>{if(v(e=>({...e,[s]:!0})),confirm(`\xbfQuieres eliminar a ${r||"este miembro"} del grupo?`))try{w(e,s),setTimeout(()=>{v(e=>{let r={...e};return delete r[s],r})},300)}catch(e){console.error("Error removing member:",e),v(e=>{let r={...e};return delete r[s],r})}else v(e=>{let r={...e};return delete r[s],r})},q=(e,s)=>{if(!N.find(s=>s.id===e))return;let r=N.reduce((e,s)=>e+(s.people?.length||0),0)+(g?g.length:0),a=j?.size||0;if(a>0&&r>=a){alert(`No se pueden agregar m\xe1s personas. El socio ya tiene ${r} personas asignadas de un l\xedmite de ${a}.`);return}k(e,s)};return e?a.jsx("div",{className:"text-center py-4",children:"Cargando grupos..."}):0===N.length?(0,a.jsxs)("div",{className:"bg-muted/50 rounded-lg p-8 text-center",children:[a.jsx(d.Z,{className:"mx-auto h-12 w-12 text-muted-foreground"}),a.jsx("h3",{className:"mt-2 text-lg font-medium",children:"No hay grupos"}),a.jsx("p",{className:"mt-1 text-muted-foreground",children:"Crea un grupo usando el formulario"})]}):(0,a.jsxs)("div",{className:"md:col-span-2",children:[a.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Grupos"}),a.jsx("div",{className:"space-y-4 grid gap-4 grid-cols-2",children:N.map(e=>(0,a.jsxs)(V.Zb,{children:[a.jsx(V.Ol,{className:"pb-2",children:(0,a.jsxs)(V.ll,{className:"flex justify-between items-center",children:[a.jsx("div",{className:"flex items-center gap-2",children:(0,a.jsxs)("span",{className:"text-sm font-normal text-muted-foreground",children:[e.people?.length||0," personas"]})}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsx(o.z,{variant:"destructive",size:"icon",onClick:()=>P(e.id),children:a.jsx(D.Z,{className:"h-4 w-4"})})})]})}),(0,a.jsxs)(V.aY,{className:"p-4",children:[(0,a.jsxs)("form",{className:"mb-3 flex gap-2",onSubmit:s=>{s.preventDefault();let r=s.target.elements.name;q(e.id,{name:r.value}),r.value=""},children:[a.jsx("input",{name:"name",type:"text",placeholder:"Nombre del miembro...",className:"flex-1 px-3 py-2 border rounded-md",required:!0}),a.jsx("button",{type:"submit",className:"px-3 py-2 bg-blue-500 text-white rounded-md",children:"Agregar"})]}),a.jsx("div",{className:"space-y-2",children:e.people?.length?a.jsx("div",{className:"divide-y",children:e.people.map(s=>(0,a.jsxs)("div",{className:(0,M.cn)("flex justify-between items-center py-3",b[s.id]&&"opacity-50"),children:[a.jsx("span",{children:s.name||"Sin nombre"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(L,{person:s,onUpdate:C,disabled:b[s.id]}),a.jsx("button",{onClick:()=>Z(e.id,s.id,s.name),className:"p-1 text-red-500 hover:bg-red-50 rounded",disabled:b[s.id],children:b[s.id]?a.jsx(T.Z,{className:"h-4 w-4 animate-spin"}):a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})})]})]},s.id))}):a.jsx("p",{className:"text-gray-500 text-center py-2",children:"No hay miembros en este grupo"})})]})]},e.id))})]})}let Y=t.forwardRef(({className:e,...s},r)=>a.jsx("textarea",{className:(0,M.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...s}));Y.displayName="Textarea";let J=(0,r(2881).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);function Q(){let[e,s]=(0,t.useState)(""),[r,n]=(0,t.useState)([]),[i,c]=(0,t.useState)(!1),[x,h]=(0,t.useState)(!1),f=(0,u.q)(e=>e.createGroup),j=(0,p.Z)(e=>e.selectedPartner),g=e=>{let s=e.split("\n").map(e=>e.trim()),r=[],a=[];return s.forEach(e=>{""===e&&a.length>0?(r.push([...a]),a=[]):""!==e&&a.push(e)}),a.length>0&&r.push(a),r},b=async()=>{let r=g(e);if(0===r.length){l.A.error("No hay grupos para importar");return}h(!0);try{let e=0;for(let s of r){let r={notes:`${s.length} personas`,people:s.map(e=>({name:e.trim()})),partnerId:j.id};await f(r),e++}s(""),n([]),c(!1),l.A.success(`Importados ${e} grupos con \xe9xito`)}catch(e){l.A.error(`Error al importar grupos: ${e.message}`)}finally{h(!1)}};return(0,a.jsxs)(m.Vq,{open:i,onOpenChange:c,children:[a.jsx(m.hg,{asChild:!0,children:(0,a.jsxs)(o.z,{className:"bg-fuchsia-pink-500 hover:bg-fuchsia-pink-600 gap-2",children:[a.jsx(J,{className:"h-4 w-4"}),"Importar desde Texto"]})}),(0,a.jsxs)(m.cZ,{className:"sm:max-w-[800px]",children:[a.jsx(m.fK,{children:a.jsx(m.$N,{children:"Importar Grupos desde Texto"})}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[a.jsx("p",{children:"Instrucciones:"}),(0,a.jsxs)("ul",{className:"list-disc pl-4 space-y-1",children:[a.jsx("li",{children:"Una persona por l\xednea"}),a.jsx("li",{children:"L\xednea en blanco para separar grupos"})]})]}),a.jsx(Y,{placeholder:"SONIA SERRAS ESTER FERNANDEZ JESUS RODRIGUEZ  MARIA BOIX GUILABERT TANIA MATO SANCHEZ",value:e,onChange:e=>{let r=e.target.value;s(r),n(g(r))},className:"h-[400px] font-mono"})]}),(0,a.jsxs)("div",{className:"border-l pl-4",children:[a.jsx("h3",{className:"font-medium mb-4",children:"Vista Previa:"}),a.jsx("div",{className:"space-y-4 max-h-[400px] overflow-y-auto",children:r.map((e,s)=>(0,a.jsxs)("div",{className:"border rounded-lg p-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(d.Z,{className:"h-4 w-4"}),(0,a.jsxs)("span",{className:"font-medium",children:["Grupo ",s+1]}),(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:["(",e.length," personas)"]})]}),a.jsx("ul",{className:"text-sm space-y-1",children:e.map((e,s)=>a.jsx("li",{className:"text-gray-600",children:e},s))})]},s))})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-2 mt-4",children:[a.jsx(o.z,{variant:"outline",onClick:()=>c(!1),children:"Cancelar"}),(0,a.jsxs)(o.z,{onClick:b,disabled:!r.length||x,className:"bg-green-600 hover:bg-green-700 text-white",children:[x?a.jsx(T.Z,{className:"h-4 w-4 mr-2 animate-spin"}):null,"Importar ",r.length," ",1===r.length?"Grupo":"Grupos"]})]})]})]})}function ee(){let[e,s]=(0,t.useState)({group:!1,individual:!1}),r=(0,p.Z)(e=>e.selectedPartner),h=(0,p.Z)(e=>e.groups),f=(0,p.Z)(e=>e.individuals);(0,x.K)(e=>e.selectedDate);let j=(0,u.q)(e=>e.isLoading),g=(0,u.q)(e=>e.createGroup),b=(0,u.q)(e=>e.deleteGroup),v=(0,u.q)(e=>e.createIndividual),N=(0,u.q)(e=>e.deleteIndividual),y=(0,u.q)(e=>e.updatePerson),k=(0,u.q)(e=>e.addPersonToGroup),w=(0,u.q)(e=>e.removePersonFromGroup),C=(0,t.useCallback)(async e=>{try{let a={...e,partnerId:r?.id};await g(a),s(e=>({...e,group:!1})),l.A.success("Grupo creado exitosamente")}catch(e){l.A.error(`Error al crear grupo: ${e.message}`)}},[g,r?.id]),P=(0,t.useCallback)(async e=>{try{let a={...e,partnerId:r?.id};await v(a),s(e=>({...e,individual:!1})),l.A.success("Persona creada exitosamente")}catch(e){l.A.error(`Error al crear persona: ${e.message}`)}},[v,r?.id]),Z=(0,t.useCallback)(e=>{window.confirm("\xbfEst\xe1s seguro que deseas eliminar este grupo?")&&b(e)},[b]),q=(0,t.useCallback)((e,s)=>{if(!h.find(s=>s.id===e)){l.A.error("Grupo no encontrado");return}k({groupId:e,personData:{...s,partnerId:r?.id}})},[k,h,r?.id]),E=(0,t.useCallback)((e,s)=>{w({groupId:e,personId:s})},[w]),A=(0,t.useCallback)(e=>{window.confirm("\xbfEst\xe1s seguro que deseas eliminar esta persona?")&&N(e)},[N]);return r?a.jsx(n.i,{children:a.jsx("div",{children:(0,a.jsxs)("div",{className:"p-8",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[a.jsx("h1",{className:"text-4xl font-bold text-primary",children:"Gesti\xf3n de Viajeros"}),a.jsx("div",{className:"flex items-center gap-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(m.Vq,{open:e.group,onOpenChange:e=>s(s=>({...s,group:e})),children:[a.jsx(m.hg,{asChild:!0,children:(0,a.jsxs)(o.z,{variant:"outline",className:"flex items-center gap-2",children:[a.jsx(i.Z,{className:"h-4 w-4"}),a.jsx(d.Z,{className:"h-4 w-4"}),a.jsx("span",{children:"A\xf1adir Grupo"})]})}),(0,a.jsxs)(m.cZ,{className:"max-w-md",children:[a.jsx(m.fK,{children:(0,a.jsxs)(m.$N,{children:["A\xf1adir grupo a ",r?.name||"partner"]})}),a.jsx("div",{className:"py-4",children:a.jsx(U,{onAddGroup:C,partnerId:r?.id,partnerName:r?.name})})]})]}),(0,a.jsxs)(m.Vq,{open:e.individual,onOpenChange:e=>s(s=>({...s,individual:e})),children:[a.jsx(m.hg,{asChild:!0,children:(0,a.jsxs)(o.z,{variant:"outline",className:"flex items-center gap-2",children:[a.jsx(i.Z,{className:"h-4 w-4"}),a.jsx(c.Z,{className:"h-4 w-4"}),a.jsx("span",{children:"A\xf1adir Personas"})]})}),(0,a.jsxs)(m.cZ,{children:[a.jsx(m.fK,{children:(0,a.jsxs)(m.$N,{children:["A\xf1adir personas a ",r?.name||"partner"]})}),a.jsx("div",{className:"py-4",children:a.jsx(O,{onAddIndividual:P})})]})]}),a.jsx(Q,{})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[a.jsx("div",{children:a.jsx(W,{individuals:f,isLoading:j,onRemoveIndividual:A})}),a.jsx("div",{className:"md:col-span-2",children:a.jsx(X,{groups:h,isLoading:j,onDeleteGroup:Z,onAddMember:q,onRemoveMember:E,onUpdatePerson:y})})]})]})})}):a.jsx(n.i,{children:a.jsx("div",{className:"flex justify-center items-center h-full p-8",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"No hay grupo seleccionado"}),a.jsx("p",{className:"text-muted-foreground mb-4",children:"Selecciona o crea un grupo para gestionar viajeros"})]})})})}},9613:(e,s,r)=>{"use strict";r.d(s,{i:()=>l});var a=r(7577),t=r(5047),n=r(5571);function l({children:e}){let{user:s,loading:r,isAuthenticated:l,init:i,refreshSession:d}=(0,n.t)(),[c,o]=(0,a.useState)(!1);return((0,t.useRouter)(),r||!l)?null:e}},809:(e,s,r)=>{"use strict";r.d(s,{Ol:()=>i,SZ:()=>c,Zb:()=>l,aY:()=>o,eW:()=>m,ll:()=>d});var a=r(326),t=r(7577),n=r(1175);let l=t.forwardRef(({className:e,...s},r)=>a.jsx("div",{ref:r,className:(0,n.cn)("rounded-xl border bg-card text-card-foreground shadow",e),...s}));l.displayName="Card";let i=t.forwardRef(({className:e,...s},r)=>a.jsx("div",{ref:r,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...s}));i.displayName="CardHeader";let d=t.forwardRef(({className:e,...s},r)=>a.jsx("div",{ref:r,className:(0,n.cn)("font-semibold leading-none tracking-tight",e),...s}));d.displayName="CardTitle";let c=t.forwardRef(({className:e,...s},r)=>a.jsx("div",{ref:r,className:(0,n.cn)("text-sm text-muted-foreground",e),...s}));c.displayName="CardDescription";let o=t.forwardRef(({className:e,...s},r)=>a.jsx("div",{ref:r,className:(0,n.cn)("p-6 pt-0",e),...s}));o.displayName="CardContent";let m=t.forwardRef(({className:e,...s},r)=>a.jsx("div",{ref:r,className:(0,n.cn)("flex items-center p-6 pt-0",e),...s}));m.displayName="CardFooter"},9640:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>a});let a=(0,r(8570).createProxy)(String.raw`C:\Users\Faia Facundo\Desktop\Programacion\proyectos_workana\hostel_log-main\src\app\viajeros\page.jsx#default`)},3881:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>t});var a=r(6621);let t=e=>[{type:"image/x-icon",sizes:"256x181",url:(0,a.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]},3405:(e,s,r)=>{"use strict";r.d(s,{D:()=>t});var a=r(7577);function t(e){let s=a.useRef({value:e,previous:e});return a.useMemo(()=>(s.current.value!==e&&(s.current.previous=s.current.value,s.current.value=e),s.current.previous),[e])}}};var s=require("../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),a=s.X(0,[948,492,621,92],()=>r(935));module.exports=a})();