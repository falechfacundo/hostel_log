(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[471],{1746:function(e,r,a){Promise.resolve().then(a.bind(a,381))},381:function(e,r,a){"use strict";a.r(r),a.d(r,{default:function(){return f}});var t=a(7437);a(1161);var s=a(3583),o=a(4449),n=a(322),l=a(3032),c=a(2265),i=a(9376),d=a(9279),u=a(4438);function f(){let e=(0,i.useRouter)(),r=(0,d._)(e=>e.addHostel),[a,f]=(0,c.useState)({name:"",capacity:0}),[h,m]=(0,c.useState)(!1),g=async t=>{if(t.preventDefault(),!a.name){u.A.error("Por favor complete todos los campos requeridos");return}let s=parseInt(a.capacity);if(isNaN(s)||s<1){u.A.error("La capacidad debe ser un n\xfamero positivo");return}m(!0);try{await r({...a,capacity:s}),e.push("/albergues")}catch(e){u.A.error("Error al crear el albergue"),console.error(e)}finally{m(!1)}};return(0,t.jsx)("div",{children:(0,t.jsxs)("div",{className:"p-8",children:[(0,t.jsx)("h1",{className:"text-4xl font-bold text-fuchsia-pink-900 mb-8",children:"Nuevo Albergue"}),(0,t.jsx)(s.Zb,{className:"max-w-2xl mx-auto p-6",children:(0,t.jsxs)("form",{onSubmit:g,className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(l._,{htmlFor:"name",children:"Nombre del Albergue"}),(0,t.jsx)(n.I,{id:"name",value:a.name,onChange:e=>f({...a,name:e.target.value}),required:!0,disabled:h})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(l._,{htmlFor:"capacity",children:"Capacidad (plazas)"}),(0,t.jsx)(n.I,{id:"capacity",type:"number",min:"1",value:a.capacity,onChange:e=>f({...a,capacity:e.target.value}),required:!0,disabled:h})]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,t.jsx)(o.z,{type:"button",variant:"outline",onClick:()=>e.push("/albergues"),disabled:h,children:"Cancelar"}),(0,t.jsx)(o.z,{type:"submit",className:"bg-fuchsia-pink-500 hover:bg-fuchsia-pink-600",disabled:h,children:h?"Creando...":"Crear Albergue"})]})]})})]})})}},3583:function(e,r,a){"use strict";a.d(r,{Ol:function(){return l},SZ:function(){return i},Zb:function(){return n},aY:function(){return d},eW:function(){return u},ll:function(){return c}});var t=a(7437),s=a(2265),o=a(6474);let n=s.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,t.jsx)("div",{ref:r,className:(0,o.cn)("rounded-xl border bg-card text-card-foreground shadow",a),...s})});n.displayName="Card";let l=s.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,t.jsx)("div",{ref:r,className:(0,o.cn)("flex flex-col space-y-1.5 p-6",a),...s})});l.displayName="CardHeader";let c=s.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,t.jsx)("div",{ref:r,className:(0,o.cn)("font-semibold leading-none tracking-tight",a),...s})});c.displayName="CardTitle";let i=s.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,t.jsx)("div",{ref:r,className:(0,o.cn)("text-sm text-muted-foreground",a),...s})});i.displayName="CardDescription";let d=s.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,t.jsx)("div",{ref:r,className:(0,o.cn)("p-6 pt-0",a),...s})});d.displayName="CardContent";let u=s.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,t.jsx)("div",{ref:r,className:(0,o.cn)("flex items-center p-6 pt-0",a),...s})});u.displayName="CardFooter"},9279:function(e,r,a){"use strict";a.d(r,{_:function(){return d}});var t=a(3011),s=a(4438);a(3079);var o=a(2119),n=(0,o.$)("f55caeec1617cf79b9f2eb056e11463b8cbb4a02"),l=(0,o.$)("229fa677a20f148a8603de39dd9331cee94983bf"),c=(0,o.$)("037b7e861bc6ea420d66cf150cb69da0c518156f"),i=(0,o.$)("6dd04356cf656044f11609b065047b9f93a65df9");let d=(0,t.U)((e,r)=>({hostels:[],isLoading:!1,error:null,fetchHostels:async()=>{try{e({isLoading:!0,error:null});let r=await l();if(r.error)throw Error(r.error);return e({hostels:r.hostels||[],isLoading:!1}),r.hostels||[]}catch(r){throw console.error("Error in fetchHostels:",r),e({error:r.message,isLoading:!1}),s.A.error("Error al cargar albergues: ".concat(r.message)),r}},addHostel:async r=>{try{e({isLoading:!0,error:null});let a=await c(r);if(a.error)throw Error(a.error);return e(e=>({hostels:[...e.hostels,a.hostel],isLoading:!1})),s.A.success('Albergue "'.concat(r.name,'" creado correctamente')),a.hostel}catch(r){throw console.error("Error in addHostel:",r),e({error:r.message,isLoading:!1}),s.A.error("Error al crear albergue: ".concat(r.message)),r}},updateHostel:async(r,a)=>{try{e({isLoading:!0,error:null});let t=await i(r,a);if(t.error)throw Error(t.error);return e(e=>({hostels:e.hostels.map(e=>e.id===r?t.hostel:e),isLoading:!1})),s.A.success("Albergue actualizado correctamente"),t.hostel}catch(r){throw console.error("Error in updateHostel:",r),e({error:r.message,isLoading:!1}),s.A.error("Error al actualizar albergue: ".concat(r.message)),r}},deleteHostel:async a=>{try{e({isLoading:!0,error:null});let t=r().hostels.find(e=>e.id===a);if(!t)throw Error("Hostel not found");let o=await n(a);if(o.error)throw Error(o.error);return e(e=>({hostels:e.hostels.filter(e=>e.id!==a),isLoading:!1})),s.A.success('Albergue "'.concat(t.name,'" eliminado correctamente')),{id:a}}catch(r){throw console.error("Error in deleteHostel:",r),e({error:r.message,isLoading:!1}),s.A.error("Error al eliminar albergue: ".concat(r.message)),r}},getHostelById:e=>r().hostels.find(r=>r.id===e)||null,resetError:()=>e({error:null})}))}},function(e){e.O(0,[172,863,241,807,656,925,845,173,611,161,971,117,744],function(){return e(e.s=1746)}),_N_E=e.O()}]);